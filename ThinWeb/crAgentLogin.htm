<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="SHORTCUT ICON" href="Icone_agent.ico" />
    <title>Nixxis client login</title>
    <link rel="stylesheet" href="CrToolboxVisual.css" />
    <!--<link rel="stylesheet" href="CrToolboxVisualWhite.css" />-->
    <link rel="stylesheet" href="CrLoginScreen.css" />
    <link rel="stylesheet" href="default.css" />
    <script type="text/javascript" language="javascript" src="CrToolbox/CrToolbox.js"></script>
    <script type="text/javascript" language="javascript" src="CrToolbox/CrToolboxControl.js"></script>
    <script type="text/javascript" language="javascript" src="CrToolbox/CrToolboxControlVisual.js"></script>
    <script type="text/javascript" language="javascript" src="js/supervisionLanguageResource.js"></script>
    <!-- <script type="text/javascript" language="javascript" src="js/supervisionConst.js"></script> -->
    <script type="text/javascript" language="javascript" src="tools.js"></script>
    <script type="text/javascript" language="javascript" src="JsCommon/NixxisCommonFn.js"></script>
    <script type="text/javascript" language="javascript" src="JsCommon/NixxisCommonObj.js"></script>
    <script type="text/javascript" language="javascript" src="link.js"></script>
    <script type="text/javascript" language="javascript" src="toolbar.js"></script>

    <script type="text/javascript" language="javascript">
        var ClientLink;

        function StartInit() {
            addElementClass($("LoginSubmit"), "Hide");
            $("lblErrorMessage").innerHTML = "";

            ClientLink = new NixxisClientLink;
        }

        function ShowHelp() {
            var dashboardLocation = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1) + 'Doc/Supervision/Supervisor.htm#_Toc184192049';
            window.open(dashboardLocation, 'SupervisionHelp', 'left=0,top=0,height=400 ,width=800, toolbar=no, location=no,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=no,resizable=yes');
        }

        function submitForm() {
            removeElementClass($("LoginSubmit"), "Hide");
            ClientLink.login($("userAccount").value, $("password").value, $("extension").value);

            debugger;

            if ($("userAccount").value == "") {
                addElementClass($("LoginSubmit"), "Hide");
                $("lblErrorMessage").innerHTML = const_LOGIN_VALIDATION_T1;
                return false;
            }

            if (ClientLink == null || ClientLink.connection == null) {
                addElementClass($("LoginSubmit"), "Hide");
                $("lblErrorMessage").innerHTML = const_LOGIN_VALIDATION_T3;
                return false;
            }

            if (ClientLink.connection.links != null && ClientLink.connection.links.length > 0) {
                var lineresponse = ClientLink.connection.links[ClientLink.connection.links.length - 1];

                if (lineresponse != "" && lineresponse.status != 200) {
                    addElementClass($("LoginSubmit"), "Hide");
                    $("lblErrorMessage").innerHTML = lineresponse.responseText;
                    return false;
                }
            }

            if (ClientLink.AgentId == "") {
                addElementClass($("LoginSubmit"), "Hide");
                $("lblErrorMessage").innerHTML = const_LOGIN_VALIDATION_T2;
                return false;
            }

            window.location = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1) + "crAgent.htm";
        }

        function resetForm() {
            $("userAccount").value = "";
            $("password").value = "";
            $("extension").value = "";
            //document.Login.reset();
        }

        function chkIdent_OnClick() {
            if ($("chkIdent").checked) {
                $("userAccount").disabled = false;
                $("password").disabled = false;
                $("extension").disabled = false;

                removeElementClass($("lblUserAccount"), "DisabledLabel"); removeElementClass($("userAccount"), "DisabledInput");
                removeElementClass($("lblPassword"), "DisabledLabel"); removeElementClass($("password"), "DisabledInput");
                removeElementClass($("lblExtension"), "DisabledLabel"); removeElementClass($("extension"), "DisabledInput");
            } else {
                $("userAccount").disabled = true;
                $("password").disabled = true;
                $("extension").disabled = true;

                addElementClass($("lblUserAccount"), "DisabledLabel"); addElementClass($("userAccount"), "DisabledInput");
                addElementClass($("lblPassword"), "DisabledLabel"); addElementClass($("password"), "DisabledInput");
                addElementClass($("lblExtension"), "DisabledLabel"); addElementClass($("extension"), "DisabledInput");
            }
        }

    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="v3/css/CrLoginScreen.css" />
</head>

<body onload="javascript:StartInit()">
    <div id="LoginSubmit" class="LoginSubmit">
        <img src="img/spinner.gif" alt="Waiting to connect" />
    </div>
    <div class="LoginBackground">
        <div class="LoginLogoBox">
            <img src="v3/img/Nixxis_Logotype_RGB_White.png" alt="Nixxis" width="140" />
        </div>
        <div class="LoginDivForm">
            <form id="Login" name="Login" action="CrLoginScreen.htm" method="post" style="overflow:hidden; width:100%">

                <div class="loginBoxMain">
                    <div class="loginFormTitle">
                        Nixxis Contact Suite 3.0<sup>TM</sup>
                    </div>
                    <div class="loginFormLeft">
                        <ul>
                            <li>
                                <div class="loginFormLabel">
                                    <label class="LoginElLabel" id="lblUserAccount" for="userAccount">
                                        <script>document.writeln(const_LOGIN_T4);</script>
                                    </label>
                                </div>
                                <div class="loginFormInput">
                                    <input class="LoginElInput" type="text" name="userAccount" id="userAccount" value="" onkeypress="return submitEnter(this,event)" />
                                </div>
                            </li>
                            <li>
                                <div class="loginFormLabel">
                                    <label class="LoginElLabel" id="lblPassword" for="password">
                                        <script>document.writeln(const_LOGIN_T5);</script>
                                    </label>
                                </div>
                                <div class="loginFormInput">
                                    <input class="LoginElInput" type="password" name="password" id="password" value="" onkeypress="return submitEnter(this,event)" />
                                </div>
                            </li>
                            <li>
                                <div class="loginFormLabel">
                                    <label for="extension" id="lblExtension">
                                        <script>document.writeln(const_LOGIN_T2);</script>
                                    </label>
                                </div>
                                <div class="loginFormInput">
                                    <input class="LoginElInput" type="text" name="extension" id="extension" value="" onkeypress="return submitEnter(this,event)" />
                                </div>
                            </li>
                            <li>
                                <div id="" class="errorMessage" id="errorMessage" style="display:visible;">
                                    <label id="lblErrorMessage">
                                        username or password is incorrect
                                    </label>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="loginFormRight">
                        <ul>
                            <li style="height:15px;"></li>
                            <li>
                                <input type="hidden" value="Client_Sup.html" name="startPage" id="startPage" />
                                <input type="hidden" value="agent" name="roles" id="roles" />
                                <!--<div id="divBtnSubmit" class="LoginButtons"></div>-->
                                <button type="button" class="loginFormLoginBtn" id="divBtnSubmit" onclick="javascript:submitForm()">
                                    <script>document.writeln(const_Btn_Ok)</script>
                                </button>
                            </li>
                            <li>
                                <!--<div id="divBtnReset" class="LoginButtons"></div>-->
                                <button type="button" id="divBtnReset" class="loginFormLoginBtn" onclick="javascript:resetForm()">
                                    <script>document.writeln(const_Btn_Cancel)</script>
                                </button>
                            </li>
                            <li style="display:none;">
                                <div style="display:none;" id="divBtnHelp" class="LoginButtons"></div>
                                <div id="div1" class="LoginButtons"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </form>
        </div>

    </div>

</body>
</html>
