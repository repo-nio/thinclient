<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Agent Chat conversation</title>
    <script type="text/javascript" src="chatLink.js"></script>
    <script type="text/javascript">
        var chatSession = new chatLink('/*[conversationid]*/');
        
        function onLoad()
        {
            chatSession.setDebugElement(document.getElementById('chatDebug'));
            
            chatSession.historyLineEvent.Add(OnHistoryLine);
        }
        
        function OnHistoryLine()
        {
            var ownerDiv = document.getElementById('chatHistory');
            var childP = document.createElement('P');
            
            childP.innerHTML = arguments[1] + ':<br />' + arguments[3];
            ownerDiv.appendChild(childP);
            
            ownerDiv.scrollTop = ownerDiv.scrollHeight;
        }
    </script>
</head>
<body onload="javascript:onLoad()">
	<h1> Agent Chat conversation </h1>
    <div id="chatHistory" style="width: 100%; height: 200px; overflow:scroll;">
    </div>
    <div id="chatSend" style="width:100%;height:40px; overflow:hidden;">
        <input id="chatText" type="text" /><input type="button" value="Send" onclick="chatSession.send(document.getElementById('chatText').value)" />
        <input type="button" value="Terminate" onclick="chatSession.disconnect()" />
    </div>

    <div id="chatDebug" style="width:100%;height:400px;overflow:auto;background-color:Silver;" />
</body>
</html>
